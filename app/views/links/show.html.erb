<div class="page-header">
  <h1><a href="<%= @link.url %>"><%= @link.title %></a><br> <small>Submitted by <%= @link.user.username %></small></h1>
</div>

<div class="btn-group">
	<%= link_to 'Visit URL', @link.url, class: "btn btn-primary" %>
</div>

<div class="btn-group pull-right">
      <%= form_for [@link, Vote.new], :remote => true do |f| %>
        <%= f.hidden_field :link_id, :value => @link.id %>        
        <%= f.hidden_field :user_id, :value => current_user.id %>
        <%= f.hidden_field :vote_value, :value => "1" %>
        <%= button_tag(class: "btn btn-secondary btn-sm", id: "upvoter-#{@link.id}") do %>
         <span class="fa fa-chevron-up"></span>
         Upvote
         <%= content_tag(:span, @link.upvotes(), id: "upvotes-#{@link.id}") %>
        <% end %>      

      <% end %>
      
      <%= form_for [@link, Vote.new], :remote => true do |f| %>
        <%= f.hidden_field :link_id, :value => @link.id %>        
        <%= f.hidden_field :user_id, :value => current_user.id %>
        <%= f.hidden_field :vote_value, :value => "-1" %>

        <%= button_tag(class: "btn btn-secondary btn-sm", id: "downvoter-#{@link.id}") do %>
         <span class="fa fa-chevron-down"></span>
         Downvote
         <%= content_tag(:span, @link.downvotes(), id: "downvotes-#{@link.id}") %>         
        <% end %>
      <% end %>
      </div>
      <% if @link.user == current_user -%>
      <div class="btn-group">
      	<%= link_to 'Edit', edit_link_path(@link), class: "btn btn-secondary" %>
      	<%= link_to 'Destroy', @link, method: :delete, data: { confirm: 'Are you sure?'}, class: "btn btn-secondary" %>
      </div>
      <% end -%>
      <h3 class="comments_title">
      	<%= @link.comments.count %> Comment(s)
      </h3>
      <div id="comments">
      	<%= render :partial => @link.comments %>
      </div>
      <%= simple_form_for [@link, Comment.new], remote: true do |f| %>
      <div class="field">
      	<%= f.text_area :body, class: "form-control" %>
      </div>
      <br>
      <%= f.submit "Add Comment", class: "btn btn-primary" %>
      <% end %>


<%= link_to 'Edit', edit_link_path(@link) %> |
<%= link_to 'Back', links_path %>
